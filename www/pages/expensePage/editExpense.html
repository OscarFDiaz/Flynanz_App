<ons-page id="editExpense">
  <ons-toolbar id="toolbar" class="toolbar" modifier="transparent">
    <div class="left">
      <ons-back-button onclick="hideAlertExpenseEditNoChange()"></ons-back-button>
    </div>
    <div class="center labelToolbar" id="titleExpensesEdit">EDITAR GASTO</div>
  </ons-toolbar>

  <div style="margin: 20px;">
    <div class="content">
      <div style="text-align: center; margin-top: 16px">
        <div>
          <p style="margin: 0px auto -16px 12px; text-align: left; padding-top: 16px; color: var(--color-input-label)" id="editExpenseName">NOMBRE DEL GASTO</p>
          <ons-input
            id="newExpenseNameEdit"
            modifier="underbar"
            placeholder=""
            type="text"
            style="display: block; margin: 0px auto 16px auto"
          ></ons-input>
        </div>
      </div>

      <p style="margin: 16px auto 0px 12px; text-align: left; color: var(--color-input-label)" id="editExpenseIcon">
        SELECCIONA UN ICONO
      </p>
      <div
      style="
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        gap: 16px;
      "
    >
      <div style="border: 2px solid var(--color-input); border-radius: 15px; margin-bottom: 16px; flex: 1">
        <ons-list style="background: none; margin-top: -16px">
          <ons-list-item id="expandableListContainerEdit" expandable>
            <p
              style="margin: 0px auto 0px 12px; text-align: left; color: var(--color-input-label)"
              id="editExpenseIconLabel"
            >
              CLICK PARA CAMBIAR
            </p>
            <div class="expandable-content" id="expenseIconListOfIconsEdit" style="background-color: var(--color-input)">
              <!-- AQUI SE CARGAN LOS ICONOS PARA SELECCIONAR -->
            </div>
          </ons-list-item>
        </ons-list>
      </div>
      <div style="width: 48px; height: 48px">
        <img
          id="imageEditExpenseIcon"
          src="./assets/icons/icons_list/art/imagesearch_roller.png"
          style="
            width: 100%;
            margin: auto auto;
            background: var(--color-input);
            border-radius: 10px;
          "
        />
      </div>
    </div>

      <div>
        <p style="margin: 0px auto -16px 12px; text-align: left; color: var(--color-input-label)" id="editExpenseSwitch">MOSTRAR EN INICIO</p>
        <div style="margin-top: 16px; border: 2px solid var(--color-input); border-radius: 15px; height: 48px">
          <div style="text-align: left; display: block; margin: 10px 16px">
            <ons-switch id="switchNewGoalEdit"></ons-switch>
          </div>
        </div>
      </div>

      <div id="gradients-container" style="margin-bottom: 32px;">
        <p style="margin: 16px auto 0px 12px; text-align: left; color: var(--color-input-label)" id="newMoneyGradientInput">Color</p>
        <div class="option">
          <ons-button
            id="gd-0"
            class="gradientButton"
            style="background: var(--gradient_0)"
            onclick="gradientButtonExpenseClick('--gradient_0', '#bfdff8', '#f4dcf5')"
          ></ons-button>
          <ons-button
           id="gd-1"
            class="gradientButton"
            style="background: var(--gradient_1)"
            onclick="gradientButtonExpenseClick('--gradient_1', '#e1f0e1', '#aadfda')"
          ></ons-button>
          <ons-button
            id="gd-2"
            class="gradientButton"
            style="background: var(--gradient_2)"
            onclick="gradientButtonExpenseClick('--gradient_2', '#b3dbf1', '#beedf5')"
          ></ons-button>
          <ons-button
            id="gd-3"
            class="gradientButton"
            style="background: var(--gradient_3)"
            onclick="gradientButtonExpenseClick('--gradient_3', '#f6e6cf', '#f3ccc4')"
          ></ons-button>
          <ons-button
           id="gd-4"
            class="gradientButton"
            style="background: var(--gradient_4)"
            onclick="gradientButtonExpenseClick('--gradient_4', '#ff8abe', '#fce9d0')"
          ></ons-button>
          <ons-button
            id="gd-5"
            class="gradientButton"
            style="background: var(--gradient_5)"
            onclick="gradientButtonExpenseClick('--gradient_5', '#96c1dc', '#d9d4ed')"
          ></ons-button>
          <ons-button
            id="gd-6"
            class="gradientButton"
            style="background: var(--gradient_6)"
            onclick="gradientButtonExpenseClick('--gradient_6', '#74f2ce', '#7cffcb')"
          ></ons-button>
          <ons-button
            id="gd-7"
            class="gradientButton"
            style="background: var(--gradient_7)"
            onclick="gradientButtonExpenseClick('--gradient_7', '#7ee8fa', '#eec0c6')"
          ></ons-button>
          <ons-button
            id="gd-8"
            class="gradientButton"
            style="background: var(--gradient_8)"
            onclick="gradientButtonExpenseClick('--gradient_8', '#b0f3f1', '#ffcfdf')"
          ></ons-button>
          <ons-button
            id="gd-9"
            class="gradientButton"
            style="background: var(--gradient_9)"
            onclick="gradientButtonExpenseClick('--gradient_9', '#fb8085', '#f9c1b1')"
          ></ons-button>
        </div>
      </div>

      <ons-button
        class="flatButton"
        style="margin-top: 16px; margin-left: 0px; margin-right: 0px"
        onclick="hideAlertExpenseEdit()"
        id="editExpenseFinishedButton"
        >LISTO!</ons-button
      >
      <ons-button
        class="flatButtonLight"
        style="margin-top: 16px; margin-left: 0px; margin-right: 0px"
        onclick="hideAlertExpenseEditNoChange()"
        id="editExpenseCancelButton"
        >CANCELAR</ons-button
      >
    </div>
  </ons-card>

  <script>
    document.addEventListener(
      'init',
      function (event) {
        if (event.target.matches('#editExpense')) {
          ons.ready(function () {
            let lang = getLang('expense');

            document.getElementById('titleExpensesEdit').innerHTML = lang.edit;
            document.getElementById('editExpenseName').innerHTML = lang.name;
            document.getElementById('editExpenseIcon').innerHTML = lang.icon;
            document.getElementById('editExpenseIconLabel').innerHTML = lang.touch;
            document.getElementById('editExpenseSwitch').innerHTML = lang.showHome;
            document.getElementById('editExpenseFinishedButton').innerHTML = lang.ready;
            document.getElementById('editExpenseCancelButton').innerHTML = lang.cancel;

            let expenseNameEdit = sessionStorage.getItem('expenseNameEdit');
            document.getElementById('newExpenseNameEdit').value = expenseNameEdit;

            let expenseS = JSON.parse(localStorage.getItem('expenseStorage'));
            let isChecked;
            let expenseInfoInsert = document.getElementById('expenseInfoInsert');

            for (let i = 0; i < expenseS.length; i++) {
              if (expenseS[i].expenseName == expenseNameEdit) {
                //Seteo el switch
                let {toShow, expenseGradient, iconUrl,iconName} = expenseS[i];
                isChecked = expenseS[i].toShow;
                toggleBorder(expenseS[i].expenseGradient);

                document.getElementById('imageEditExpenseIcon').src = `${iconUrl}${iconName}`
                break;
              }
            }

            if (isChecked) {
              document.getElementById('switchNewGoalEdit').setAttribute('checked', true);
            } else {
              document.getElementById('switchNewGoalEdit').removeAttribute('checked');
            }
          });
        }
      },
      false
    );
    document.addEventListener(
      'show',
      function (event) {
        if (event.target.matches('#editExpense')) {
          ons.ready(function () {
            //Cargo los iconos
            loadIconsEdit();
          });
        }
      },
      false,
    );
  </script>
</ons-page>
