<ons-page id="editGoal">
  <ons-toolbar id="toolbar" class="toolbar" modifier="transparent">
    <div class="left">
      <ons-back-button onclick="hideAlertNoChange()"></ons-back-button>
    </div>
    <div class="center labelToolbar" id="modifyGoalTitle">Editar meta</div>
  </ons-toolbar>

  <div style="margin: 20px">
    <div style="text-align: center; margin-top: 0px">
      <div>
        <p
          style="
            margin: 0px auto -16px 12px;
            text-align: left;
            padding-top: 16px;
            color: var(--color-input-label);
          "
          id="goalNameAlertEdit"
        >
          NOMBRE DE LA META
        </p>
        <ons-input
          id="editGoalName"
          modifier="underbar"
          placeholder=""
          type="text"
          style="display: block"
        ></ons-input>
      </div>

      <div>
        <p
          style="
            margin: 0px auto 0px 12px;
            text-align: left;
            padding-top: 16px;
            color: var(--color-input-label);
          "
          id="goalDescriptionAlertEdit"
        >
          DESCRIPCIÓN
        </p>
        <textarea
          id="editGoalDescription"
          class="textarea"
          rows="5"
          placeholder=""
        ></textarea>
      </div>

      <div>
        <p
          style="
            margin: 0px auto -16px 12px;
            text-align: left;
            padding-top: 16px;
            color: var(--color-input-label);
          "
          id="goalMoneyAlertEdit"
        >
          DINERO NECESARIO
        </p>
        <ons-input
          id="editGoalMoney"
          modifier="underbar"
          placeholder=""
          type="number"
          style="display: block"
        ></ons-input>
      </div>

      <div>
        <p
          style="
            margin: 0px auto -16px 12px;
            text-align: left;
            padding-top: 16px;
            color: var(--color-input-label);
          "
          id="goalMoneyActualAlertEdit"
        >
          DINERO ACTUAL
        </p>
        <ons-input
          id="editActualGoalMoney"
          modifier="underbar"
          placeholder=""
          type="number"
          style="display: block"
        ></ons-input>
      </div>

      <div>
        <p
          style="
            margin: 0px auto -16px 12px;
            text-align: left;
            padding-top: 16px;
            color: var(--color-input-label);
          "
          id="goalDateAlertEdit"
        >
          FECHA META
        </p>
        <ons-input
          id="editGoalDate"
          modifier="underbar"
          placeholder=""
          type="date"
          style="display: block"
        ></ons-input>
      </div>
    </div>

    <!--Seleccion de icono-->
    <p
      style="
        margin: 16px auto 0px 12px;
        text-align: left;
        color: var(--color-input-label);
      "
      id="newGoalIconEdit"
    >
      SELECCIONA UN ICONO
    </p>
    <div
      style="
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        gap: 16px;
      "
    >
      <div
        style="
          border: 2px solid var(--color-input);
          border-radius: 15px;
          margin-bottom: 16px;
          flex: 1;
        "
      >
        <ons-list style="background: none; margin-top: -16px">
          <ons-list-item id="expandableListContainerGoalEdit" expandable>
            <p
              style="
                margin: 0px auto 0px 12px;
                text-align: left;
                color: var(--card-content-text-color);
              "
              id="newExpenseIconLabelGoalEdit"
            >
              CLICK PARA CAMBIAR
            </p>
            <div
              class="expandable-content"
              id="expenseIconListOfIconsGoalEdit"
              style="background-color: var(--color-input)"
            >
              <!-- AQUI SE CARGAN LOS ICONOS PARA SELECCIONAR -->
            </div>
          </ons-list-item>
        </ons-list>
      </div>
      <div style="width: 48px; height: 48px">
        <img
          id="imageEditGoalIcon"
          src="./assets/icons/icons_list/art/imagesearch_roller.png"
          style="
            width: 100%;
            margin: auto auto;
            background: var(--color-input);
            border-radius: 10px;
          "
        />
      </div>
    </div>

    <!--Selección de degradado-->
    <div id="gradients-container">
      <p
        style="
          margin: 16px auto 0px 12px;
          text-align: left;
          color: var(--color-input-label);
        "
        id="newMoneyGradientInput"
      >
        Color
      </p>
      <div class="option">
        <ons-button
          id="gd-0"
          class="gradientButton"
          style="background: var(--gradient_0)"
          onclick="gradientButtonClick('--gradient_0')"
        ></ons-button>
        <ons-button
          id="gd-1"
          class="gradientButton"
          style="background: var(--gradient_1)"
          onclick="gradientButtonClick('--gradient_1')"
        ></ons-button>
        <ons-button
          id="gd-2"
          class="gradientButton"
          style="background: var(--gradient_2)"
          onclick="gradientButtonClick('--gradient_2')"
        ></ons-button>
        <ons-button
          id="gd-3"
          class="gradientButton"
          style="background: var(--gradient_3)"
          onclick="gradientButtonClick('--gradient_3')"
        ></ons-button>
        <ons-button
          id="gd-4"
          class="gradientButton"
          style="background: var(--gradient_4)"
          onclick="gradientButtonClick('--gradient_4')"
        ></ons-button>
        <ons-button
          id="gd-5"
          class="gradientButton"
          style="background: var(--gradient_5)"
          onclick="gradientButtonClick('--gradient_5')"
        ></ons-button>
        <ons-button
          id="gd-6"
          class="gradientButton"
          style="background: var(--gradient_6)"
          onclick="gradientButtonClick('--gradient_6')"
        ></ons-button>
        <ons-button
          id="gd-7"
          class="gradientButton"
          style="background: var(--gradient_7)"
          onclick="gradientButtonClick('--gradient_7')"
        ></ons-button>
        <ons-button
          id="gd-8"
          class="gradientButton"
          style="background: var(--gradient_8)"
          onclick="gradientButtonClick('--gradient_8')"
        ></ons-button>
        <ons-button
          id="gd-9"
          class="gradientButton"
          style="background: var(--gradient_9)"
          onclick="gradientButtonClick('--gradient_9')"
        ></ons-button>
      </div>
    </div>
  </div>

  <div style="margin: 32px 20px">
    <ons-button
      class="flatButton"
      style="margin-top: 16px; margin-left: 0px; margin-right: 0px"
      onclick="hideAlertDialog()"
      id="goalFinishedButtonAlertEdit"
      >LISTO!</ons-button
    >
    <ons-button
      class="flatButtonLight"
      style="margin-top: 16px; margin-left: 0px; margin-right: 0px"
      onclick="hideAlertNoChange()"
      id="goalCancelButtonAlertEdit"
      >CANCELAR</ons-button
    >
  </div>

  <script>
    document.addEventListener(
      'init',
      function (event) {
        if (event.target.matches('#editGoal')) {
          ons.ready(function () {
            createAlertDialogToEditGoal();
            loadDetailGoal();

            const lang = getLang('goals');

            document.getElementById('modifyGoalTitle').innerHTML = lang.modify;
            document.getElementById('goalNameAlertEdit').innerHTML = lang.name;
            document.getElementById('goalDescriptionAlertEdit').innerHTML = lang.desc;
            document.getElementById('goalMoneyAlertEdit').innerHTML = lang.moneyNeed;
            document.getElementById('goalMoneyActualAlertEdit').innerHTML =
              lang.moneyCurrent;
            document.getElementById('goalDateAlertEdit').innerHTML = lang.date;
            document.getElementById('newGoalIconEdit').innerHTML = lang.icon;
            document.getElementById('newExpenseIconLabelGoalEdit').innerHTML =
              lang.change;
            document.getElementById('goalCancelButtonAlertEdit').innerHTML = lang.cancel;
            document.getElementById('goalFinishedButtonAlertEdit').innerHTML = lang.ready;

            //Activo el borde/gradiente que el usuario ha seleccionado
            let retrievedGoal = sessionStorage.getItem('sessionFindGoal');
            let { goalGradient } = JSON.parse(retrievedGoal);
            toggleBorder(goalGradient);
          });
        }
      },
      false,
    );
    document.addEventListener(
      'show',
      function (event) {
        if (event.target.matches('#editGoal')) {
          ons.ready(function () {
            //Cargo los iconos
            loadIconsGoalEdit();
          });
        }
      },
      false,
    );
  </script>
</ons-page>
